<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Proposal: High-Volume PII Lookup System</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 800px; 
            margin: 0 auto; 
            height: 350px; 
            max-height: 400px; 
        }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .active-tab { border-bottom: 2px solid #2563eb; color: #2563eb; font-weight: 600; }
        .inactive-tab { color: #64748b; }
        .inactive-tab:hover { color: #334155; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>

    <!-- Placeholder Comments -->
    <!-- Chosen Palette: Slate & Royal Blue (Professional, Trust, Data-focused) -->
    <!-- Application Structure Plan: A logical flow starting with the Problem Definition (Volumetrics), moving to Solution Options (Architecture Comparison), providing Quantitative Analysis (Cost Calculator), demonstrating the User Experience (Mock Prototype), and concluding with an Action Plan (Roadmap). This structure guides the user from understanding the scale to choosing a solution. -->
    <!-- Visualization & Content Choices: 
         1. Volumetrics: Simple numbers to ground the user.
         2. Architecture Comparison: Interactive Cards + Detail View. Goal: Compare complex tech stacks simply. Interaction: Click to expand details.
         3. Cost Analysis: Line Chart. Goal: Compare linear vs fixed costs. Interaction: Sliders to adjust usage.
         4. Prototype: Functional Input + JS-simulated Search. Goal: Demonstrate the "feel" of the recommended stack.
         5. Roadmap: Timeline/List. Goal: Step-by-step execution guide.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-slate-800 tracking-tight">Data<span class="text-blue-600">Architect</span></span>
                </div>
                <div class="hidden sm:flex space-x-8 items-center">
                    <button onclick="scrollToSection('volumetrics')" class="text-sm font-medium text-slate-600 hover:text-blue-600 transition">Volumetrics</button>
                    <button onclick="scrollToSection('architecture')" class="text-sm font-medium text-slate-600 hover:text-blue-600 transition">Solutions</button>
                    <button onclick="scrollToSection('cost-analysis')" class="text-sm font-medium text-slate-600 hover:text-blue-600 transition">Cost Analysis</button>
                    <button onclick="scrollToSection('prototype')" class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition shadow-sm">Live Prototype</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-slate-900 text-white py-20">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-4">
                Architecture Proposal: <br/>High-Scale PII Lookup System
            </h1>
            <p class="text-lg text-slate-300 mb-8 max-w-2xl mx-auto">
                Analyzing the most efficient path to query 9 Million records (6M PII + 3M Mobile) with minimal effort and cost.
            </p>
            <div class="flex justify-center gap-4">
                <div class="bg-slate-800/50 backdrop-blur-sm p-4 rounded-lg border border-slate-700">
                    <p class="text-xs text-slate-400 uppercase tracking-wider">Total Records</p>
                    <p class="text-3xl font-bold text-blue-400">9,000,000</p>
                </div>
                <div class="bg-slate-800/50 backdrop-blur-sm p-4 rounded-lg border border-slate-700">
                    <p class="text-xs text-slate-400 uppercase tracking-wider">Project Goal</p>
                    <p class="text-3xl font-bold text-emerald-400">Low Cost</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow">

        <!-- Volumetrics & Context -->
        <section id="volumetrics" class="py-16 bg-white">
            <div class="max-w-5xl mx-auto px-4">
                <div class="mb-10 text-center">
                    <h2 class="text-3xl font-bold text-slate-900">Understanding the Scale</h2>
                    <p class="mt-4 text-slate-600 max-w-2xl mx-auto">
                        9 million records is a unique "middle ground" size. It crashes Excel and browsers (Client-side), but is trivial for any backend database.
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <!-- Stat 1 -->
                    <div class="p-6 bg-slate-50 rounded-xl border border-slate-100">
                        <div class="text-4xl mb-2">üíæ</div>
                        <h3 class="text-lg font-bold text-slate-800">Storage Size</h3>
                        <p class="text-slate-500 mt-2 text-sm">~1.5 GB</p>
                        <p class="text-xs text-slate-400 mt-1">Raw CSV</p>
                        <div class="w-full bg-slate-200 rounded-full h-2 mt-4">
                            <div class="bg-blue-500 h-2 rounded-full" style="width: 10%"></div>
                        </div>
                        <p class="text-xs text-slate-400 mt-1">Compressed (Parquet/SQL): ~400MB</p>
                    </div>

                    <!-- Stat 2 -->
                    <div class="p-6 bg-slate-50 rounded-xl border border-slate-100">
                        <div class="text-4xl mb-2">‚ö°</div>
                        <h3 class="text-lg font-bold text-slate-800">Search Speed</h3>
                        <p class="text-slate-500 mt-2 text-sm">~5ms</p>
                        <p class="text-xs text-slate-400 mt-1">Indexed SQL Query</p>
                        <div class="w-full bg-slate-200 rounded-full h-2 mt-4">
                            <div class="bg-red-400 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-xs text-slate-400 mt-1">Raw CSV Scan: ~5-10 seconds</p>
                    </div>

                    <!-- Stat 3 -->
                    <div class="p-6 bg-slate-50 rounded-xl border border-slate-100">
                        <div class="text-4xl mb-2">üîí</div>
                        <h3 class="text-lg font-bold text-slate-800">Security Risk</h3>
                        <p class="text-red-600 font-bold mt-2 text-sm">CRITICAL</p>
                        <p class="text-xs text-slate-500 mt-1">PII requires Auth & Encryption</p>
                        <p class="text-xs text-slate-400 mt-2 bg-yellow-50 p-2 rounded border border-yellow-100">
                            Warning: Do not host raw CSVs publicly.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Architecture Options -->
        <section id="architecture" class="py-16 bg-slate-50">
            <div class="max-w-6xl mx-auto px-4">
                <div class="mb-12">
                    <h2 class="text-3xl font-bold text-slate-900">Proposed Solutions</h2>
                    <p class="mt-4 text-slate-600">
                        We compared three architectural patterns based on "Vibe Coding" principles (speed to deploy) and long-term maintenance.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                    <!-- Option Selection (Left Col) -->
                    <div class="lg:col-span-4 space-y-4">
                        <button onclick="updateArchDetails('option1')" id="btn-option1" class="w-full text-left p-4 rounded-lg bg-white shadow-sm border border-blue-500 ring-1 ring-blue-500 transition-all flex items-center justify-between">
                            <div>
                                <h3 class="font-bold text-slate-800">Option A: The "Local-First"</h3>
                                <p class="text-sm text-slate-500">DuckDB + Streamlit/FastAPI</p>
                            </div>
                            <span class="text-blue-600 font-bold">Recommended</span>
                        </button>

                        <button onclick="updateArchDetails('option2')" id="btn-option2" class="w-full text-left p-4 rounded-lg bg-white shadow-sm border border-slate-200 hover:border-blue-300 transition-all">
                            <div>
                                <h3 class="font-bold text-slate-800">Option B: The "Serverless"</h3>
                                <p class="text-sm text-slate-500">Supabase/Turso + Next.js</p>
                            </div>
                        </button>

                        <button onclick="updateArchDetails('option3')" id="btn-option3" class="w-full text-left p-4 rounded-lg bg-white shadow-sm border border-slate-200 hover:border-blue-300 transition-all">
                            <div>
                                <h3 class="font-bold text-slate-800">Option C: The "Static"</h3>
                                <p class="text-sm text-slate-500">Parquet + DuckDB-WASM</p>
                            </div>
                        </button>
                    </div>

                    <!-- Option Details (Right Col) -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-sm border border-slate-200 min-h-[400px]">
                        <div id="arch-content">
                            <!-- Dynamic Content Loaded via JS -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cost Analysis -->
        <section id="cost-analysis" class="py-16 bg-white">
            <div class="max-w-6xl mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-end mb-8">
                    <div class="mb-6 md:mb-0">
                        <h2 class="text-3xl font-bold text-slate-900">Cost & Effort Analysis</h2>
                        <p class="mt-2 text-slate-600">Simulate monthly costs based on usage volume.</p>
                    </div>
                    <div class="bg-slate-100 p-4 rounded-lg">
                        <label class="block text-sm font-medium text-slate-700 mb-2">Projected Searches / Month: <span id="query-val" class="font-bold text-blue-600">10,000</span></label>
                        <input type="range" min="1000" max="500000" value="10000" step="1000" id="query-slider" class="w-full h-2 bg-slate-300 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-slate-400 mt-1">
                            <span>1k</span>
                            <span>500k</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <div class="chart-container bg-white rounded-lg border border-slate-100 p-4 shadow-sm">
                            <canvas id="costChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div class="p-4 bg-blue-50 border border-blue-100 rounded-lg">
                            <h4 class="font-bold text-blue-800 text-sm uppercase">Development Time</h4>
                            <div class="mt-3 space-y-3">
                                <div>
                                    <div class="flex justify-between text-sm text-slate-700 mb-1">
                                        <span>Local-First (Python)</span>
                                        <span class="font-bold">2 Hours</span>
                                    </div>
                                    <div class="w-full bg-blue-200 h-1.5 rounded-full">
                                        <div class="bg-blue-600 h-1.5 rounded-full" style="width: 20%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm text-slate-700 mb-1">
                                        <span>Serverless (JS)</span>
                                        <span class="font-bold">6 Hours</span>
                                    </div>
                                    <div class="w-full bg-blue-200 h-1.5 rounded-full">
                                        <div class="bg-blue-600 h-1.5 rounded-full" style="width: 60%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 bg-slate-50 border border-slate-100 rounded-lg">
                            <h4 class="font-bold text-slate-800 text-sm uppercase">Recommendation</h4>
                            <p class="text-sm text-slate-600 mt-2">
                                For minimal effort, **Option A (Python + DuckDB)** is unbeatable. You can code the backend in 1 file. 
                            </p>
                            <p class="text-sm text-slate-600 mt-2">
                                For best web access without managing servers, **Option B (Serverless)** scales to zero cost when not in use.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Prototype -->
        <section id="prototype" class="py-16 bg-slate-900 text-white">
            <div class="max-w-4xl mx-auto px-4">
                <div class="text-center mb-10">
                    <span class="bg-blue-600 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide">Interactive Demo</span>
                    <h2 class="text-3xl font-bold mt-4">Experience the Speed</h2>
                    <p class="text-slate-400 mt-2">This is how the final "Vibe-Coded" app will behave. Instant search results using indexed data.</p>
                </div>

                <!-- Mock App Interface -->
                <div class="bg-white text-slate-800 rounded-xl shadow-2xl overflow-hidden border border-slate-700">
                    <!-- App Header -->
                    <div class="bg-slate-100 px-6 py-4 border-b border-slate-200 flex justify-between items-center">
                        <div class="font-bold text-slate-700 flex items-center gap-2">
                            <span class="w-3 h-3 rounded-full bg-emerald-500"></span>
                            Secure Lookup System
                        </div>
                        <div class="text-xs text-slate-500">Admin User: Connected</div>
                    </div>

                    <!-- App Body -->
                    <div class="p-6 md:p-10 min-h-[400px] flex flex-col">
                        
                        <!-- Search Bar -->
                        <div class="relative w-full max-w-2xl mx-auto mb-8">
                            <input type="text" id="mock-search" placeholder="Search by Name, Phone, or ID..." 
                                class="w-full pl-12 pr-4 py-4 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition text-lg shadow-sm">
                            <div class="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 text-xl">
                                üîç
                            </div>
                            <div id="loading-spinner" class="hidden absolute right-4 top-1/2 transform -translate-y-1/2">
                                <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"></div>
                            </div>
                        </div>

                        <!-- Results Area -->
                        <div id="results-area" class="flex-grow">
                            <!-- Empty State -->
                            <div id="empty-state" class="text-center py-12">
                                <div class="text-6xl mb-4 opacity-20">üìÇ</div>
                                <h3 class="text-lg font-medium text-slate-400">Enter a query to search 9M records</h3>
                                <p class="text-sm text-slate-400 mt-2">Avg. search time: &lt;50ms</p>
                            </div>
                            
                            <!-- Results Table (Hidden by default) -->
                            <div id="results-table" class="hidden animate-fade-in">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="font-bold text-slate-700">Results Found: <span class="text-blue-600">3</span></h4>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Time: 12ms</span>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-slate-200">
                                        <thead class="bg-slate-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">ID</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Name</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Phone</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Status</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-slate-200 text-sm">
                                            <!-- Rows populated by JS -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- App Footer -->
                    <div class="bg-slate-50 px-6 py-3 border-t border-slate-200 text-xs text-slate-400 flex justify-between">
                        <span>Database: DuckDB (Local)</span>
                        <span>Encryption: AES-256</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Roadmap -->
        <section class="py-16 bg-white">
            <div class="max-w-4xl mx-auto px-4">
                <h2 class="text-3xl font-bold text-slate-900 mb-10 text-center">Implementation Roadmap</h2>
                <div class="relative border-l-2 border-blue-200 ml-4 space-y-10">
                    
                    <div class="relative pl-8">
                        <span class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-600 ring-4 ring-white"></span>
                        <h3 class="font-bold text-lg text-slate-800">Step 1: Data Prep & Hygiene</h3>
                        <p class="text-slate-600 mt-1">Don't load CSVs directly. Use a script to clean phone numbers (standardize format) and merge the 6M + 3M files into a single structured format. Convert to **Parquet** or **SQLite**.</p>
                        <div class="mt-2 bg-slate-100 p-3 rounded text-xs font-mono text-slate-600">
                            > pip install pandas pyarrow<br>
                            > df.to_parquet('data.parquet')
                        </div>
                    </div>

                    <div class="relative pl-8">
                        <span class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-600 ring-4 ring-white"></span>
                        <h3 class="font-bold text-lg text-slate-800">Step 2: The Backend Engine</h3>
                        <p class="text-slate-600 mt-1">Use **DuckDB** in Python. It's designed for OLAP and querying large local files instantly without the overhead of Postgres.</p>
                        <p class="text-sm text-blue-600 mt-1 font-medium">Why? Zero setup, zero monthly cost, extremely fast on 9M rows.</p>
                    </div>

                    <div class="relative pl-8">
                        <span class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-600 ring-4 ring-white"></span>
                        <h3 class="font-bold text-lg text-slate-800">Step 3: Vibe Coding the UI</h3>
                        <p class="text-slate-600 mt-1">Use an LLM (Cursor, Gemini, etc.) to generate a FastAPI wrapper around DuckDB and a simple React frontend. Prompt: "Create a FastAPI endpoint that queries a parquet file using DuckDB based on a search term."</p>
                    </div>
                    
                    <div class="relative pl-8">
                        <span class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-600 ring-4 ring-white"></span>
                        <h3 class="font-bold text-lg text-slate-800">Step 4: Security Layer</h3>
                        <p class="text-slate-600 mt-1">Add Basic Auth or OAuth immediately. Ensure the server is HTTPS. Limit query rate to prevent scraping.</p>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-8 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p>&copy; 2026 Architecture Proposal. Generated for PII Lookup Optimization.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. State & Data ---
        const optionsData = {
            'option1': {
                title: "Option A: The \"Local-First\" (Python + DuckDB)",
                desc: "Run a lightweight Python server (FastAPI) that reads a compressed Parquet file using DuckDB. Hosting: A $5/mo VPS (DigitalOcean/Hetzner).",
                pros: ["Lowest Cost ($5/mo fixed)", "Fastest Dev Time", "Total Data Control"],
                cons: ["You manage the server OS", "Not serverless (always on)"],
                stack: ["FastAPI", "DuckDB", "Parquet", "Alpine Linux"]
            },
            'option2': {
                title: "Option B: The \"Serverless Vibe\" (Supabase/Turso)",
                desc: "Upload CSVs to a managed serverless SQL DB like Turso (LibSQL) or Supabase (Postgres). Build frontend with Next.js deployed on Vercel.",
                pros: ["Zero Ops/Maintenance", "Scales automatically", "Built-in Auth"],
                cons: ["Variable costs (pay per read)", "Initial data upload time"],
                stack: ["Next.js", "Turso/Supabase", "Vercel", "Tailwind"]
            },
            'option3': {
                title: "Option C: The \"Static\" (WASM)",
                desc: "The entire database lives in the browser using DuckDB-WASM. The 400MB Parquet file is downloaded/cached by the user one time.",
                pros: ["Zero Backend Cost", "Fastest possible search (local)", "Zero Latency"],
                cons: ["Heavy initial download (400MB)", "Browser memory limits", "Security risk (data is on user device)"],
                stack: ["DuckDB-WASM", "React", "S3/R2 Bucket"]
            }
        };

        const mockData = [
            { id: "88231", name: "Johnathan Doe", phone: "+1 (555) 019-2834", status: "Active" },
            { id: "99102", name: "Jane Smith-Doe", phone: "+1 (555) 012-9988", status: "Inactive" },
            { id: "11234", name: "J. Doer", phone: "+1 (555) 234-5678", status: "Active" }
        ];

        let costChart = null;

        // --- 2. Architecture Comparison Logic ---
        function updateArchDetails(optionKey) {
            // Reset Styles
            ['option1', 'option2', 'option3'].forEach(key => {
                const btn = document.getElementById(`btn-${key}`);
                if(key === optionKey) {
                    btn.classList.add('ring-1', 'ring-blue-500', 'border-blue-500');
                    btn.classList.remove('border-slate-200');
                } else {
                    btn.classList.remove('ring-1', 'ring-blue-500', 'border-blue-500');
                    btn.classList.add('border-slate-200');
                }
            });

            // Update Content
            const data = optionsData[optionKey];
            const contentDiv = document.getElementById('arch-content');
            
            contentDiv.innerHTML = `
                <div class="animate-fade-in">
                    <h3 class="text-2xl font-bold text-slate-800 mb-2">${data.title}</h3>
                    <p class="text-lg text-slate-600 mb-6">${data.desc}</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div>
                            <h4 class="font-bold text-green-600 mb-2 flex items-center"><span class="mr-2">‚úì</span> Pros</h4>
                            <ul class="space-y-2">
                                ${data.pros.map(p => `<li class="text-sm text-slate-600 ml-4 list-disc">${p}</li>`).join('')}
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-red-500 mb-2 flex items-center"><span class="mr-2">‚úï</span> Cons</h4>
                            <ul class="space-y-2">
                                ${data.cons.map(c => `<li class="text-sm text-slate-600 ml-4 list-disc">${c}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-bold text-slate-800 mb-2">Tech Stack</h4>
                        <div class="flex flex-wrap gap-2">
                            ${data.stack.map(s => `<span class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm font-medium border border-slate-200">${s}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // --- 3. Cost Chart Logic ---
        function initCostChart() {
            const ctx = document.getElementById('costChart').getContext('2d');
            
            // Initial data for 10k queries
            const data = {
                labels: ['Option A (VPS)', 'Option B (Serverless)', 'Option C (Static)'],
                datasets: [{
                    label: 'Monthly Cost ($)',
                    data: [5, 0, 0], // Placeholders, updated by updateChart
                    backgroundColor: ['#3b82f6', '#10b981', '#6366f1'],
                    borderRadius: 6
                }]
            };

            costChart = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `$${context.raw}/month`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Monthly Cost (USD)' }
                        }
                    }
                }
            });

            updateChart(10000); // Init
        }

        function updateChart(queries) {
            // Option A: Fixed VPS cost ($5 - $10)
            const costA = 6; 
            
            // Option B: Serverless (Free tier usually covers ~1B reads on some, but let's assume standard pricing)
            // Example: $0.10 per 100k reads after free tier
            let costB = 0;
            if (queries > 100000) {
                costB = ((queries - 100000) / 100000) * 0.5; // Hypothetical pricing
            }
            // Add compute time
            costB += (queries * 0.00001); // minimal compute
            costB = Math.max(0, costB);

            // Option C: Bandwidth costs for S3/CDN if downloading 400MB
            // 400MB * queries is HUGE bandwidth.
            // 0.4 GB * queries * $0.09/GB (AWS standard)
            // This option actually gets expensive fast if many unique users download the DB
            const costC = (queries * 0.4 * 0.05); // Assuming caching reduces this heavily, say 5% hit rate for full download?

            costChart.data.datasets[0].data = [costA, costB.toFixed(2), costC.toFixed(2)];
            costChart.update();
        }

        // --- 4. Mock Prototype Logic ---
        const searchInput = document.getElementById('mock-search');
        const spinner = document.getElementById('loading-spinner');
        const emptyState = document.getElementById('empty-state');
        const resultsTable = document.getElementById('results-table');
        const tbody = resultsTable.querySelector('tbody');

        searchInput.addEventListener('keyup', (e) => {
            const val = e.target.value.trim();
            if (e.key === 'Enter' || val.length > 2) {
                performSearch(val);
            } else if (val.length === 0) {
                emptyState.classList.remove('hidden');
                resultsTable.classList.add('hidden');
            }
        });

        function performSearch(term) {
            // Visual feedback
            spinner.classList.remove('hidden');
            emptyState.classList.add('hidden');
            resultsTable.classList.add('hidden');

            // Simulate Network Delay (Vibe Coding Speed: Fast!)
            setTimeout(() => {
                spinner.classList.add('hidden');
                resultsTable.classList.remove('hidden');
                
                // Populate Dummy Data
                tbody.innerHTML = '';
                mockData.forEach(row => {
                    // Simple highlighting logic
                    const tr = document.createElement('tr');
                    tr.className = "hover:bg-slate-50 transition";
                    tr.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-slate-900 font-mono">${row.id}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-slate-700 font-medium">${row.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-slate-500">${row.phone}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${row.status === 'Active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                ${row.status}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-blue-600 hover:text-blue-900 cursor-pointer text-xs font-bold uppercase">View Profile</td>
                    `;
                    tbody.appendChild(tr);
                });

            }, 400); // 400ms delay
        }

        // --- 5. Init & Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            // Init Chart
            initCostChart();

            // Init default tab
            updateArchDetails('option1');

            // Slider Listener
            const slider = document.getElementById('query-slider');
            const output = document.getElementById('query-val');
            slider.addEventListener('input', (e) => {
                const val = parseInt(e.target.value);
                output.textContent = val.toLocaleString();
                updateChart(val);
            });
        });

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

    </script>
</body>
</html>
